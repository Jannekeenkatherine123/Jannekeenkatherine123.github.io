function detectIE(){const ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(0<msie)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);if(0<ua.indexOf("Trident/")){var edge=ua.indexOf("rv:");return parseInt(ua.substring(edge+3,ua.indexOf(".",edge)),10)}edge=ua.indexOf("Edge/");return 0<edge&&parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)}function isIE(){return!1!==detectIE()}"util"in websight||(function(){var a="undefined"!=typeof window?window:exports,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=function(){try{document.createElement("$")}catch(a){return a}}();a.btoa||(a.btoa=function(a){for(var d,e,f=0,g=b,h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&d>>8-f%1*8)){if(255<(e=a.charCodeAt(f+=.75)))throw c;d=d<<8|e}return h}),a.atob||(a.atob=function(a){if((a=a.replace(/=+$/,"")).length%4==1)throw c;for(var e,f,d=0,g=0,h="";f=a.charAt(g++);~f&&(e=d%4?64*e+f:f,d++%4)&&(h+=String.fromCharCode(255&e>>(-2*d&6))))f=b.indexOf(f);return h})}(),websight.util={log:function(str){"undefined"!=typeof console&&console.log("[Sooqr] "+str)},ucFirst:function(str){return str.substring(0,1).toUpperCase()+str.substring(1)},getLanguage:function(){return(window.navigator.userLanguage||window.navigator.language).replace(/\-/g,"_")},getWindowScrollTop:function(){return Math.max($jQ("body").scrollTop(),$jQ("html").scrollTop())},setWindowScrollTop:function(top){return $jQ("body, html").scrollTop(top)},removeWww:function(hostname){return hostname=0==hostname.indexOf("www.")?hostname.substring(4):hostname},getCookie:function(key){for(var offset,cookieContainer=document.cookie;-1!=(offset=cookieContainer.indexOf(key+"="));){offset+=key.length+1;var cookie=document.cookie.indexOf(";",offset);-1==cookie&&(cookie=document.cookie.length);cookie=document.cookie.substring(offset,cookie);return unescape(cookie)}return""},unsetCookie:function(key,newCookie){newCookie=key+"="+escape(newCookie);newCookie+="; Path=/",newCookie+="; Domain=."+websight.util.removeWww(window.location.hostname),newCookie+="; Expires=Thu, 01 Jan 1970 00:00:01 GMT",document.cookie=newCookie},domainHash:function(){return this.createHash(window.location.hostname)},createHash:function(str){var calc,iChar,charCode,hash=1;if(str)for(hash=0,iChar=str.length-1;0<=iChar;iChar--)hash=0!=(calc=266338304&(hash=(hash<<6&268435455)+(charCode=str.charCodeAt(iChar))+(charCode<<14)))?hash^calc>>21:hash;return hash},propCount:function(obj){var counter=0;for(k in obj)obj.hasOwnProperty(k)&&counter++;return counter},replaceQueryVars:function(url,replace){var index,params,qparts={};for(k in-1!=(index=url.indexOf("?"))&&(params=url.substring(index+1).split(/&/),url=url.substring(0,index),$jQ.each(params,function(index,keyValue){keyValue=keyValue.split(/=/);2==keyValue.length&&(qparts[keyValue[0]]=escape(keyValue[1]))})),replace)qparts[k]=replace[k];url+="?";var queryParams=[];return $jQ.each(qparts,function(index,value){queryParams.push(index+"="+value)}),url+queryParams.join("&")},randomNumber:function(){return Math.round(2147483647*Math.random())},regexpEscape:function(text){return arguments.callee.sRE||(arguments.callee.sRE=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g")),text.replace(arguments.callee.sRE,"\\$1")},b64Encode:function(str){return btoa(str)},b64Decode:function(str){return atob(str)},_isTouch:null,isTouch:function(){return null==websight.util._isTouch&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?websight.util._isTouch=!0:websight.util._isTouch=!1),websight.util._isTouch},debounce:function(callback,delay){var timeout;return function(){var context=this,args=arguments;clearTimeout(timeout),timeout=setTimeout(function(){callback.apply(context,args)},delay)}}}),"DelayedQueue"in websight.util||(websight.util.DelayedQueue=function(instance,queue){this.instance=instance,this.push=function(element){var method=element.slice(0);if(websight.util.log("test"),!this.instance)return!1;this.instance[method].apply(this.instance,element)};for(var element;element=queue.shift();)this.push(element)}),function($){function Selectbox(){this._state=[],this._defaults={classHolder:"sbHolder",classHolderDisabled:"sbHolderDisabled",classSelector:"sbSelector",classOptions:"sbOptions",classGroup:"sbGroup",classSub:"sbSub",classDisabled:"sbDisabled",classToggleOpen:"sbToggleOpen",classToggle:"sbToggle",classFocus:"sbFocus",speed:200,effect:"slide",onChange:null,onOpen:null,onClose:null}}$.extend(Selectbox.prototype,{_isOpenSelectbox:function(target){return!!target&&this._getInst(target).isOpen},_isDisabledSelectbox:function(target){return!!target&&this._getInst(target).isDisabled},_attachSelectbox:function(target,sbHolder){if(this._getInst(target))return!1;var sbSelector,sbToggle,sbOptions,$target=$(target),self=this,inst=self._newInst($target),s=!1,opts=($target.find("optgroup"),$target.find("option")),olen=opts.length;function closeOthers(){var key,sel,uid=this.attr("id").split("_")[1];for(key in self._state)key!==uid&&self._state.hasOwnProperty(key)&&(sel=$("select[data-sb='"+key+"']")[0])&&self._closeSelectbox(sel)}function getOptions(argument_0,argument_1){var sub=!(!argument_1||!argument_1.sub),disabled=!(!argument_1||!argument_1.disabled);argument_0.each(function(i){var child,that=$(this),li=$("<li>");that.is(":selected")&&(sbSelector.text(that.text()),s=!0),i===olen-1&&li.addClass("last"),that.is(":disabled")||disabled?(child=$("<span>",{text:that.text()}).addClass(inst.settings.classDisabled),sub&&child.addClass(inst.settings.classSub)):(child=$("<a>",{href:"#"+that.val(),rel:that.val()}).text(that.text()).on("click.sb",function($this){$this&&$this.preventDefault&&$this.preventDefault();var t=sbToggle,$this=$(this);t.attr("id").split("_")[1];self._changeSelectbox(target,$this.attr("rel"),$this.text()),self._closeSelectbox(target)}).on("mouseover.sb",function(){var $this=$(this);$this.parent().siblings().find("a").removeClass(inst.settings.classFocus),$this.addClass(inst.settings.classFocus)}).on("mouseout.sb",function(){$(this).removeClass(inst.settings.classFocus)}),sub&&child.addClass(inst.settings.classSub),that.is(":selected")&&child.addClass(inst.settings.classFocus)),child.appendTo(li),li.appendTo(sbOptions)})}$target.data("sb",inst.uid),$.extend(inst.settings,self._defaults,sbHolder),self._state[inst.uid]=!1,$target.hide(),sbHolder=$("<div>",{id:"sbHolder_"+inst.uid,"class":inst.settings.classHolder,tabindex:$target.attr("tabindex")}),(sbSelector=$("<a>",{id:"sbSelector_"+inst.uid,href:"#","class":inst.settings.classSelector})).on("click",function(uid){uid.preventDefault(),closeOthers.apply($(this),[]);uid=$(this).attr("id").split("_")[1];self._state[uid]?self._closeSelectbox(target):self._openSelectbox(target)}),(sbToggle=$("<a>",{id:"sbToggle_"+inst.uid,href:"#","class":inst.settings.classToggle})).on("click",function(uid){uid.preventDefault(),closeOthers.apply($(this),[]);uid=$(this).attr("id").split("_")[1];self._state[uid]?self._closeSelectbox(target):self._openSelectbox(target)}),sbToggle.appendTo(sbHolder),sbOptions=$("<ul>",{id:"sbOptions_"+inst.uid,"class":inst.settings.classOptions,css:{display:"none"}}),$target.children().each(function(i){var li,that=$(this),config={};that.is("option")?getOptions(that):that.is("optgroup")&&(li=$("<li>"),$("<span>",{text:that.attr("label")}).addClass(inst.settings.classGroup).appendTo(li),li.appendTo(sbOptions),that.is(":disabled")&&(config.disabled=!0),config.sub=!0,getOptions(that.find("option"),config))}),s||sbSelector.text(opts.first().text()),$.data(target,"selectbox",inst),sbHolder.data("uid",inst.uid).on("keydown.sb",function(e){var key=e.charCode||e.keyCode||0,$this=$(this),uid=$this.data("uid"),inst=$this.siblings("select[data-sb='"+uid+"']").data("selectbox"),trgt=$this.siblings(["select[data-sb='",uid,"']"].join("")).get(0),$f=$this.find("ul").find("a."+inst.settings.classFocus);switch(key){case 37:case 38:0<$f.length&&($("a",$this).removeClass(inst.settings.classFocus),0<(i=$f.parent().prevAll("li:has(a)").eq(0).find("a")).length&&(i.addClass(inst.settings.classFocus).focus(),$("#sbSelector_"+uid).text(i.text())));break;case 39:case 40:$("a",$this).removeClass(inst.settings.classFocus),0<(i=0<$f.length?$f.parent().nextAll("li:has(a)").eq(0).find("a"):$this.find("ul").find("a").eq(0)).length&&(i.addClass(inst.settings.classFocus).focus(),$("#sbSelector_"+uid).text(i.text()));break;case 13:0<$f.length&&self._changeSelectbox(trgt,$f.attr("rel"),$f.text()),self._closeSelectbox(trgt);break;case 9:trgt&&(inst=self._getInst(trgt))&&(0<$f.length&&self._changeSelectbox(trgt,$f.attr("rel"),$f.text()),self._closeSelectbox(trgt));var i=parseInt($this.attr("tabindex"),10);e.shiftKey?i--:i++,$("*[tabindex='"+i+"']").focus();break;case 27:self._closeSelectbox(trgt)}return e.stopPropagation(),!1}).on("mouseover","a",function(e){$(this).addClass(inst.settings.classFocus)}).on("mouseout","a",function(e){$(this).removeClass(inst.settings.classFocus)}),sbSelector.appendTo(sbHolder),sbOptions.appendTo(sbHolder),sbHolder.insertAfter($target),$("html").on("mousedown",function(e){e.stopPropagation(),$("select").selectbox("close")}),$([".",inst.settings.classHolder,", .",inst.settings.classSelector].join("")).on("mousedown",function(e){e.stopPropagation()})},_detachSelectbox:function(target){var inst=this._getInst(target);if(!inst)return!1;$("#sbHolder_"+inst.uid).remove(),$.data(target,"selectbox",null),$(target).show()},_changeSelectbox:function(target,value,text){var onChange,inst=this._getInst(target);inst&&(onChange=this._get(inst,"onChange"),$("#sbSelector_"+inst.uid).text(text)),value=value.replace(/\'/g,"\\'"),$(target).find("option[value='"+value+"']").attr("selected",!0),inst&&onChange?onChange.apply(inst.input?inst.input[0]:null,[value,inst]):inst&&inst.input&&inst.input.trigger("change")},_enableSelectbox:function(target){var inst=this._getInst(target);if(!inst||!inst.isDisabled)return!1;$("#sbHolder_"+inst.uid).removeClass(inst.settings.classHolderDisabled),inst.isDisabled=!1,$.data(target,"selectbox",inst)},_disableSelectbox:function(target){var inst=this._getInst(target);if(!inst||inst.isDisabled)return!1;$("#sbHolder_"+inst.uid).addClass(inst.settings.classHolderDisabled),inst.isDisabled=!0,$.data(target,"selectbox",inst)},_optionSelectbox:function(target,name,value){var inst=this._getInst(target);if(!inst)return!1;inst[name]=value,$.data(target,"selectbox",inst)},_openSelectbox:function(target){var el,viewportHeight,height,diff,onOpen,inst=this._getInst(target);!inst||inst.isOpen||inst.isDisabled||(el=$("#sbOptions_"+inst.uid),viewportHeight=parseInt($(window).height(),10),diff=$("#sbHolder_"+inst.uid).offset(),onOpen=$(window).scrollTop(),height=el.prev().height(),diff=viewportHeight-(diff.top-onOpen)-height/2,onOpen=this._get(inst,"onOpen"),el.css({top:height+"px",maxHeight:diff-height+"px"}),"fade"===inst.settings.effect?el.fadeIn(inst.settings.speed):el.slideDown(inst.settings.speed),$("#sbToggle_"+inst.uid).addClass(inst.settings.classToggleOpen),this._state[inst.uid]=!0,inst.isOpen=!0,onOpen&&onOpen.apply(inst.input?inst.input[0]:null,[inst]),$.data(target,"selectbox",inst))},_closeSelectbox:function(target){var onClose,inst=this._getInst(target);inst&&inst.isOpen&&(onClose=this._get(inst,"onClose"),"fade"===inst.settings.effect?$("#sbOptions_"+inst.uid).fadeOut(inst.settings.speed):$("#sbOptions_"+inst.uid).slideUp(inst.settings.speed),$("#sbToggle_"+inst.uid).removeClass(inst.settings.classToggleOpen),this._state[inst.uid]=!1,inst.isOpen=!1,onClose&&onClose.apply(inst.input?inst.input[0]:null,[inst]),$.data(target,"selectbox",inst))},_newInst:function(target){return{id:target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:target,uid:Math.floor(99999999*Math.random()),isOpen:!1,isDisabled:!1,settings:{}}},_getInst:function(target){try{return $.data(target,"selectbox")}catch(err){throw"Missing instance data for this selectbox"}},_get:function(inst,name){return(void 0!==inst.settings[name]?inst.settings:this._defaults)[name]}}),$.fn.selectbox=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);return"string"==typeof options&&"isDisabled"==options||"option"==options&&2==arguments.length&&"string"==typeof arguments[1]?$.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this[0]].concat(otherArgs)):this.each(function(){"string"==typeof options?$.selectbox["_"+options+"Selectbox"].apply($.selectbox,[this].concat(otherArgs)):$.selectbox._attachSelectbox(this,options)})},$.selectbox=new Selectbox,$.selectbox.version="0.2"}($jQ),websight.sooqr.Suggest=function(parameters){this.objectName="Suggest",this.allowedToRun=!0,this.parameters=parameters,this.container=null,this.filterContainer=null,this.searchCallback=null,this.queryField=null,this.extraFields=[],this.containerPosition="left",this.containerPositionParameter={left:0,top:0},this.overlay=null,this.initialized=!1,this.instanceName=null,this.tracking=!0,this.hideEmptyFilters=!1,this.placeholders=null,this.previousTypedQuery=null,this.responsiveResizeInitialized=!1,this.activeResponsiveWidth=null,this.customServerUrl=document.location.protocol+"//static.spotlersearch.com/custom/";if("%%static_hostname%%".startsWith("%%")||(this.customServerUrl=document.location.protocol+"//%%static_hostname%%/"),this.trackerQueue=[],this.indexSettings={view:{selectQueryOnClick:!1}},this.indexSettingsOverrule={view:{}},(null==parameters.index||null==parameters.view)&&null==parameters.account)return websight.util.log("Account identifier missing. It should look like SQ-123456-1."),this.allowedToRun=!1;if(parameters.zIndex=9999,parameters.index&&parameters.view)this.instanceName=parameters.index+"|"+parameters.view;else{if(!("account"in parameters&&parameters.account.match(/^SQ\-[0-9]+\-[0-9]+/)))return websight.util.log("Account identifier format is invalid. It should look like SQ-123456-1."),void(this.allowedToRun=!1);this.instanceName=parameters.account}(websight.sooqr.instances[this.instanceName]=this).sourceCodeLoader=function(){parameters.source?new websight.sooqr.Loader.multiLoad(["/global/javascript/source/v"+this.parameters.version+"/jquery-ui.js","/global/javascript/source/v"+this.parameters.version+"/debug.js","/global/javascript/source/v"+this.parameters.version+"/searchCallback.js","/global/javascript/source/v"+this.parameters.version+"/filterPanel.js","/global/javascript/source/v"+this.parameters.version+"/resultsPanel.js"],$jQ.proxy(this.completeContainerInitialisation,this),!1):websight.sooqr.Loader.load(document.location.protocol+"//"+this.indexSettings.connection.staticServer+"/global/javascript/sooqr-core.v"+this.parameters.version+".js",$jQ.proxy(this.completeContainerInitialisation,this),!1)},this.completeInitialisation=function(){if($jQ.extend(!0,this.indexSettings,this.indexSettingsOverrule),0!=this.indexSettings.active){if(this.indexSettings.connection||(this.indexSettings.connection={}),this.indexSettings.index&&(this.parameters.index=this.indexSettings.index),this.indexSettings.account&&(this.parameters.account=this.indexSettings.account),this.indexSettings.view.id&&(this.parameters.view=this.indexSettings.view.id),0<websight.util.getCookie("sqrStaticServer").length?(this.indexSettings.connection.staticServer=websight.util.getCookie("sqrStaticServer"),websight.util.log("Using staticServer from cookie: "+this.indexSettings.connection.staticServer)):this.parameters.staticServer?this.indexSettings.connection.staticServer=this.parameters.staticServer:((isIE="%%static_hostname%%").startsWith("%%")&&(isIE="static.spotlersearch.com"),this.indexSettings.connection.staticServer=isIE),0<websight.util.getCookie("sqrServer").length?(this.indexSettings.connection.server=websight.util.getCookie("sqrServer"),websight.util.log("Using server from cookie: "+this.indexSettings.connection.server)):this.parameters.server?this.indexSettings.connection.server=this.parameters.server:this.indexSettings.connection.server="dynamic.spotlersearch.com",this.parameters.proxy&&(this.indexSettings.connection.proxy=this.parameters.proxy),0!=this.allowedToRun){var containers=this.parameters.account.replace(/^SQ\-/,"").replace(/\-/g,"/"),isIE="combined.css";0<websight.util.getCookie("sooqr-preview-"+this.parameters.account.replace(/^SQ\-/,"")).length&&(isIE="combined_preview.css"),$jQ.getCSS(this.customServerUrl+containers+"/"+isIE);isIE=!1!==detectIE();if(isIE&&(7===isIE?$jQ.getCSS(this.customServerUrl+containers+"/extra-ie7.css"):8===isIE&&$jQ.getCSS(this.customServerUrl+containers+"/extra-ie8.css")),"filterContainer"in this.parameters){filterContainerName=this.parameters.filterContainer;containers=$jQ(filterContainerName+" div.sooqrSearchFilters");if(null==containers||1!=containers.length)return websight.util.log("Suggest filter container not found"),this.allowedToRun=!1;this.filterContainer=$jQ(filterContainerName).eq(0)}this.sourceCodeLoader()}}else this.allowedToRun=!1},this.initialized||(this.initialized=!0,websight.sooqr.Loader.hostname,parameters.server?parameters.server:parameters.debug,websight.sooqr.Loader.load(this.customServerUrl+parameters.account.substring(3).replace(/-/,"/")+".js",$jQ.proxy(this.completeInitialisation,this)),this.completeContainerInitialisation=function(){this.searchCallback=new websight.sooqr.SearchCallback(this),$jQ($jQ.proxy(function(){var extraFieldIds,mainFieldId;if(Array.isArray(parameters.fieldId)?(mainFieldId=parameters.fieldId[0],extraFieldIds=parameters.fieldId.slice(1)):mainFieldId=parameters.fieldId,extraFieldIds){var i,thisSooqrObject=this,_extraFieldIds=[];for(i in extraFieldIds)"string"==typeof extraFieldIds[i]&&_extraFieldIds.push("input#"+extraFieldIds[i]);this.extraFields=$jQ(_extraFieldIds.join(",")),this.extraFields.on("input",function(){$jQ("input#"+mainFieldId).val($jQ(this).val()),thisSooqrObject.searchCallback.delayedCallback({filterInitiated:!1})}),$jQ("input#"+mainFieldId).on("input",function(){thisSooqrObject.extraFields.val($jQ(this).val()),thisSooqrObject.searchCallback.delayedCallback({filterInitiated:!1})})}if(null==parameters.fieldId)this.queryField=null;else{var queryFields=$jQ("input#"+mainFieldId);if(null==queryFields||1!=queryFields.length)return websight.util.log("Main query field not found"),!1;this.queryField=queryFields.first(),this.queryField.on("focus",$jQ.proxy(function(){$jQ(this).trigger("focus")},this)),this.queryField.on("blur",$jQ.proxy(function(){$jQ(this).trigger("blur")},this)),queryFields.attr("autocomplete","off")}if(null!=this.queryField&&this.indexSettings.view.disableFormSubmit)switch(this.indexSettings.view.disableFormSubmit){case"hide":$jQ('input[type="submit"], button[type="submit"]',this.queryField.closest("form")).hide();case"click":case"never":case"yes":this.queryField.closest("form").off("submit").on("submit",$jQ.proxy(function(event){return event.preventDefault(),event.stopPropagation(),this.searchCallback.directCallback({filterInitiated:!1}),!1},this))}null!=this.queryField&&(fromHash=$jQ.proxy(function(){var currentQuery=$jQ.trim(this.getSearchQuery());this.previousTypedQuery!=currentQuery&&this.searchCallback.delayedCallback({filterInitiated:!1}),this.previousTypedQuery=currentQuery},this),this.queryField.on("input",fromHash),fromHash=$jQ.proxy(function(){!this.isContainerVisible()&&this.queryField.val()!=this.queryField.attr("title")&&this.checkNotPlaceholder(this.queryField.val())&&(0<this.queryField.val().length?this.searchCallback.delayedCallback({filterInitiated:!1}):this.previousTypedQuery="")},this),this.queryField.on("click",fromHash),"1"==this.indexSettings.view.selectQueryOnClick&&this.queryField.on("focus",function(){this.select()})),this.container=$jQ("#sooqrView"+parameters.view);var isSafari,fromHash=void 0!==this.indexSettings.view.mobileFilterIcons&&this.indexSettings.view.mobileFilterIcons,fromHash='<div class="sooqrSearchHeader" style="clear: both; display: none;"></div>'+(4==this.indexSettings.view.cssVersion?'<div class="sooqrSearchOptionsMobile"><div class="sqr-options"> </div><div class="sooqrSearchMobileTabs'+(fromHash?" sooqrSearchMobileTabsIcons":"")+'"><div class="sooqrSearchMobileTabsResults sooqrSearchMobileTabsActive"><a><span data-results-text>Resultaten</span> (<span class="sqrSearchResultCounter" aria-live="polite"></span>)</a></div><div class="sooqrSearchMobileTabsFilters"><a data-filters-text>Filteren</a></div></div></div>':"")+'<div class="sooqrSearchFilters"></div><div class="sooqrSearchResultsContainer"><div class="sooqrSearchResults"></div></div><div class="sooqrSearchFooter" style="clear: both; display: none;"></div>';this.container.length?(this.container.html(fromHash),this.container.hasClass("sooqrSearchContainer")||this.container.addClass("sooqrSearchContainer"),this.container.hasClass("sooqr-index-"+parameters.index.replace(/[^a-z0-9]/g,"-"))||this.container.addClass("sooqr-index-"+parameters.index.replace(/[^a-z0-9]/g,"-"))):(this.container=$jQ('<div class="sooqrSearchContainer sooqrSearchContainer-'+parameters.account.replace(/^SQ\-/,"")+" sooqr-index-"+parameters.index.replace(/[^a-z0-9]/g,"-")+'" id="sooqrView'+parameters.view+'" aria-live="polite">'+fromHash+"</div>"),this.container.css("position","absolute").css("z-index",this.parameters.zIndex).hide(),"containerParent"in this.parameters?this.container.eq(0).appendTo($jQ(this.parameters.containerParent)):this.container.eq(0).appendTo(document.body)),this.positionContainer(),"enableBackButton"in this.indexSettings.view&&1==this.indexSettings.view.enableBackButton&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),$jQ(window).on("pageshow",event=>{event.originalEvent.persisted&&isSafari&&this.backButtonFunctionality()}),this.backButtonFunctionality());fromHash=!1;(fromHash="enableHash"in this.indexSettings.view&&1==this.indexSettings.view.enableHash||"enableLoadHash"in this.indexSettings.view&&1==this.indexSettings.view.enableLoadHash?this.searchCallback.parseSearchFromHash():fromHash)||(null!=this.queryField?0<this.queryField.val().length&&this.queryField.val()!=this.queryField.attr("title")&&this.checkNotPlaceholder(this.queryField.val())&&(this.previousTypedQuery=$jQ(this.queryField).val(),setTimeout($jQ.proxy(function(){this.searchCallback.directCallback({filterInitiated:!1})},this),250)):this.searchCallback.directCallback({filterInitiated:!1}))},this)),$jQ(this).trigger("initialized")},this.backButtonFunctionality=function(){var lastQuery=sessionStorage.getItem("__sqrlq");if(null!==lastQuery){try{lastQuery=JSON.parse(lastQuery)}catch(e){return void sessionStorage.removeItem("__sqrlq")}"u"in lastQuery&&lastQuery.u===window.location.href&&"p"in lastQuery&&lastQuery.p.account===this.parameters.account&&(sessionStorage.removeItem("__sqrlq"),this.searchCallback.scrollAfterRequest=lastQuery.p.scrollAfterRequest,window.scrollTo(0,0),this.setSearchQuery(lastQuery.q.searchQuery),lastQuery.q.filterInitiated=!1,0<lastQuery.q.offset&&(lastQuery.q.limit=parseInt(lastQuery.q.offset)+this.indexSettings.view.resultsPerPage,lastQuery.q.offset=0),this.searchCallback.sendSearchQuery(lastQuery.q.searchQuery,lastQuery.q.filterQuery,lastQuery.q))}else sessionStorage.removeItem("__sqrlq")},this.handleResponsiveResize=function(){this.responsiveResizeInitialized||($jQ(window).on("resize",$jQ.proxy(function(){var self,searchCallback,heightUpdateCallback,$resultsContainer=this.getResultsContainer(),$optionsMobile=$jQ(".sooqrSearchOptionsMobile",this.container),$filtersContainer=$jQ(".sooqrSearchFilters",this.container),windowWidth=$jQ(window).width(),_activeResponsiveWidth=this.activeResponsiveWidth;windowWidth<this.indexSettings.view.responsiveMobileWidth?this.activeResponsiveWidth!=this.indexSettings.view.responsiveMobileWidth&&(self=this,$jQ(".sooqrSearchMobileTabsResults",$optionsMobile).hasClass("sooqrSearchMobileTabsActive")&&($filtersContainer.hide(),$optionsMobile.data("original-top",$optionsMobile.offset().top)),searchCallback=self.searchCallback,heightUpdateCallback=$jQ.proxy(function(){this.container.css("height",Math.max($jQ("body").height()-this.container.offset().top,this.searchCallback.filterPanel.getHeight()+$optionsMobile.height())+"px")},this),$jQ(".sooqrSearchMobileTabsFilters",$optionsMobile).on("touchstart click",function(event){event.preventDefault(),event.stopPropagation(),$resultsContainer.hide(),$jQ(".sooqrSearchMobileTabsResults",$optionsMobile).removeClass("sooqrSearchMobileTabsActive"),$jQ(".sooqrSearchMobileTabsFilters",$optionsMobile).addClass("sooqrSearchMobileTabsActive"),$filtersContainer.show(),self.container.css("min-height",""),heightUpdateCallback(),$jQ(self).on("updateFilters",heightUpdateCallback),searchCallback.resultsPanel.toggleMoreResultsLoaderCallback(!1),"fixed"==$optionsMobile.css("position")&&window.scrollTo(0,$optionsMobile.data("original-top"))}),$jQ(".sooqrSearchMobileTabsResults",$optionsMobile).on("touchstart click",function(event){event.preventDefault(),event.stopPropagation(),$filtersContainer.hide(),$jQ(".sooqrSearchMobileTabsFilters",$optionsMobile).removeClass("sooqrSearchMobileTabsActive"),$jQ(".sooqrSearchMobileTabsResults",$optionsMobile).addClass("sooqrSearchMobileTabsActive"),$resultsContainer.show(),searchCallback.resultsPanel.toggleMoreResultsLoaderCallback(!0),$jQ(self).off("updateFilters",heightUpdateCallback),"fixed"==$optionsMobile.css("position")&&window.scrollTo(0,$optionsMobile.data("original-top"))}),this.moveChildren($resultsContainer.find(".sqr-options"),$optionsMobile.find(".sqr-options")),this.activeResponsiveWidth=this.indexSettings.view.responsiveMobileWidth):null!=this.activeResponsiveWidth&&($resultsContainer.show(),$filtersContainer.show(),this.container.css("height",""),this.moveChildren($optionsMobile.find(".sqr-options"),$resultsContainer.find(".sqr-options")),this.activeResponsiveWidth=null),this.searchCallback.filterPanel&&this.searchCallback.filterPanel.handleResponsiveResize(_activeResponsiveWidth,this.activeResponsiveWidth)},this)).trigger("resize"),this.responsiveResizeInitialized=!0)},this.moveChildren=function($src,$dest){var $children=$src.children(),$newContainer=$dest;$newContainer.empty();for(var iChild=0;iChild<$children.length;iChild++)$jQ($children[iChild]).detach().appendTo($newContainer)},this.setContainerPosition=function(position,parameter){this.containerPosition=position,this.containerPositionParameter=null!=parameter?parameter:null},this.positionContainer=function(position,suppliedOffset,resize){if(null==position&&(position=this.containerPosition),null==resize&&(resize=!1),null==suppliedOffset&&(suppliedOffset=this.containerPositionParameter),null!=this.queryField){var firstVisibleInputField,elementOffset,inputOffset=this.queryField.offset();switch(inputOffset.top+=this.queryField.height()+14,this.extraFields.length&&((firstVisibleInputField=document.activeElement.id)&&$jQ("input#"+firstVisibleInputField).length?(inputOffset=$jQ("input#"+firstVisibleInputField).offset()).top+=$jQ("input#"+firstVisibleInputField).height()+14:(firstVisibleInputField=$jQ.grep(parameters.fieldId,function(n,i){return $jQ("#"+n).is(":visible")}).shift())&&((inputOffset=$jQ("input#"+firstVisibleInputField).offset()).top+=$jQ("input#"+firstVisibleInputField).height()+14)),this.withinFixedOrSticky(this.queryField)&&(inputOffset.top-=$jQ(window).scrollTop()),position){case"left":inputOffset.left>$jQ(window).width()/2&&(inputOffset.left-=790-this.queryField.width());break;case"right":inputOffset.left=inputOffset.left-(this.container.width()-this.queryField.width())+7;break;case"screen-middle":inputOffset.left=Math.max(0,Math.floor($jQ(window).width()/2)-Math.floor(this.container.width()/2)),null!=suppliedOffset&&"top"in suppliedOffset&&(inputOffset.top+=$jQ.isFunction(suppliedOffset.top)?suppliedOffset.top():suppliedOffset.top),resize||$jQ(window).on("resize",$jQ.proxy(function(){this.positionContainer(null,null,!0)},this));break;case"middle":inputOffset.left=inputOffset.left+Math.round(this.queryField.width()/2-this.container.width()/2);break;case"element-relative":null==suppliedOffset||(elementOffset=$jQ(suppliedOffset))&&(elementOffset=elementOffset.offset(),inputOffset.left=elementOffset.left,inputOffset.top=elementOffset.top,this.container.css("position","absolute"));break;case"input-relative":inputOffset.left+=$jQ.isFunction(suppliedOffset.left)?suppliedOffset.left():suppliedOffset.left,inputOffset.top+=$jQ.isFunction(suppliedOffset.top)?suppliedOffset.top():suppliedOffset.top;break;case"fixed":inputOffset.left=$jQ.isFunction(suppliedOffset.left)?suppliedOffset.left():suppliedOffset.left,inputOffset.top=$jQ.isFunction(suppliedOffset.top)?suppliedOffset.top():suppliedOffset.top}this.container.css({"top":inputOffset.top+"px","left":inputOffset.left+"px"})}},this.withinFixedOrSticky=function($element){return"HTML"!==$element.prop("tagName")&&(-1!==["fixed","sticky"].indexOf($element.css("position"))||this.withinFixedOrSticky($element.offsetParent()))},this.showOverlays=function(){null==this.overlay&&(this.overlay=$jQ('<div id="sooqrOverlay">&#160;</div>'),$jQ(document.body).append(this.overlay)),this.overlay.show()},this.showContainer=function(){this.container.is(":visible")||(document.body.contains(this.container[0])||$jQ(this.parameters.containerParent||document.body).append(this.container),"disable_auto_scroll_to_top"in this.indexSettings.view&&0!=this.indexSettings.view.disable_auto_scroll_to_top||window.scrollTo(0,0),this.indexSettings.view.contentSectionSelector&&$jQ(this.indexSettings.view.contentSectionSelector).css("visibility","hidden"),this.positionContainer(),this.updateMinimumHeight(),this.showOverlays(),this.container.show(),$jQ(this).trigger("open"))},this.hideContainer=function(){this.container.hide(),this.hideOverlay(),this.previousTypedQuery=null,this.indexSettings.view.contentSectionSelector&&$jQ(this.indexSettings.view.contentSectionSelector).css("visibility","visible"),"clearQueryfieldOnClose"in this.indexSettings.view&&this.indexSettings.view.clearQueryfieldOnClose&&(this.queryField.val(""),this.extraFields.length&&this.extraFields.val("")),"enableHash"in this.indexSettings.view&&1==this.indexSettings.view.enableHash&&this.searchCallback.serializeSearchToHash({}),null!=this.searchCallback.filterPanel&&null!=this.searchCallback.filterPanel&&(this.searchCallback.filterPanel.persistentParameters={filtersShowAll:!1,filterValuesShowAll:{}}),"scrollToTopOnClose"in this.indexSettings.view&&this.indexSettings.view.scrollToTopOnClose&&window.scrollTo(0,0),$jQ(this).trigger("close")},this.isContainerVisible=function(){return this.container.is(":visible")},this.hideOverlay=function(){null!=this.overlay&&this.overlay.hide()},this.getContainer=function(){return this.container},this.getFilterContainer=function(){return this.filterContainer||this.container},this.getParameters=function(){return this.parameters},this.getQueryText=function(){return null!=this.queryField?this.queryField.val():""},this.setQueryText=function(text){this.setSearchQuery(text),this.checkNotPlaceholder(text)&&this.searchCallback.directCallback({filterInitiated:!1})},this.getResultsContainer=function(){return $jQ("div.sooqrSearchResultsContainer",this.container)},this.getSearchQuery=function(){return null!=this.queryField?this.queryField.val():null},this.setSearchQuery=function(text){return null!=this.queryField?(this.extraFields.length&&this.extraFields.val(text),this.queryField.val(text)):null},this.getApiMethod=function(){return"suggest"},this.push=function(element){switch(element.shift()){case"_disableTracking":this.tracking=!1;break;case"_enableTracking":this.tracking=!0;break;case"_hideEmptyFilters":this.hideEmptyFilters=element.shift();break;case"_setProxy":this.parameters.proxy=element.shift();break;case"_setDefaultFilters":this.parameters.defaultFilters=element.shift();break;case"_excludePlaceholders":this.placeholders=element.shift();break;case"_setSecuredFilters":this.parameters.securedFiltersHash=element.shift(),this.parameters.securedFilters=element.shift();break;case"_setZIndex":this.parameters.zIndex=element.shift();break;case"_refreshPosition":this.positionContainer();break;case"_close":this.hideContainer();break;case"_setPosition":var position=element.shift();"fixed"==position||"input-relative"==position||"element-relative"==position||"screen-middle"==position?this.setContainerPosition(position,element.shift()):this.setContainerPosition(position);break;case"_setDynamicFields":this.parameters.dynamicFields=element.shift();break;default:return!1}return!0},this.appendDefaultFilters=function(filterQuery){if(this.parameters.defaultFilters)for(k in null==filterQuery&&(filterQuery={}),this.parameters.defaultFilters)this.parameters.defaultFilters.hasOwnProperty(k)&&!filterQuery.hasOwnProperty(k)&&(filterQuery[k]=this.parameters.defaultFilters[k]);if(this.parameters.defaultSubValues)for(filterId in this.parameters.defaultSubValues)if(filterQuery[filterId])for(k in this.parameters.defaultSubValues[filterId])filterQuery[filterId]._&&filterQuery[filterId]._==k&&!filterQuery[filterId].values&&(filterQuery[filterId].values=this.parameters.defaultSubValues[filterId][k]);return filterQuery},this.appendFixedFilters=function(filterQuery){if(this.parameters.fixedFilters)for(k in null==filterQuery&&(filterQuery={}),this.parameters.fixedFilters)this.parameters.fixedFilters.hasOwnProperty(k)&&!filterQuery.hasOwnProperty(k)&&(filterQuery[k]=this.parameters.fixedFilters[k]);return filterQuery},this.triggerEvent=function(eventName,newEvent){var sessionId,datetime,currentEvents,hostName;this.instanceName&&((sessionId=sessionStorage.getItem("sessionId"))||(sessionId=Math.round(2147483647*Math.random()).toString(),sessionStorage.setItem("sessionId",sessionId)),datetime=(new Date).toISOString(),currentEvents=JSON.parse(localStorage.getItem("sqz_events"))||[],hostName=escape(window.location.hostname),newEvent={id:parseInt(this.instanceName.match(/SQ-1(\d{5})-\d/)[1]),datetime:datetime,request_type:eventName,host_name:hostName,user_session_id:sessionId,...newEvent},localStorage.setItem("sqz_events",JSON.stringify([...currentEvents,newEvent])),document.dispatchEvent(new Event("triggered_sqz_event")))},this.getFixedFilters=function(){return this.parameters&&"fixedFilters"in this.parameters?$jQ.extend(!0,{},this.parameters.fixedFilters):{}},this.getExclusionFilters=function(){return this.parameters&&"exclusionFilters"in this.parameters?$jQ.extend(!0,{},this.parameters.exclusionFilters):{}},this.appendSecuredFilters=function(filterQuery){if(null==filterQuery&&(filterQuery={}),this.parameters.securedFilters)for(k in null==filterQuery&&(filterQuery={}),this.parameters.securedFilters)this.parameters.securedFilters.hasOwnProperty(k)&&(filterQuery[k]=this.parameters.securedFilters[k]);return filterQuery},this.needResultsRender=function(){return!0},this.resetFilters=function(event){event.preventDefault(),this.searchCallback.filterPanel.panelElement.find('a[rel="reset"]').css("visibility","hidden"),this.searchCallback.directCallback({filterInitiated:!1})},this.checkNotPlaceholder=function(query){return null==this.placeholders||$jQ.isArray(this.placeholders)&&-1==$jQ.inArray(query,this.placeholders)||!$jQ.isArray(this.placeholders)&&query!=this.placeholders},this.appendSecuredFiltersParameters=function(queryParameters){return this.parameters.securedFilters&&(queryParameters.securedFiltersHash=this.parameters.securedFiltersHash),queryParameters},this.appendDynamicFieldsParameters=function(queryParameters){return this.parameters.dynamicFields&&(queryParameters.dynamicFields=this.parameters.dynamicFields),queryParameters},this.updateMinimumHeight=function(){var minimumHeight,containerOffset;"container"in this&&(minimumHeight=0,minimumHeight=("containerParent"in this.parameters?$jQ(window):$jQ("html, body")).height(),null!=this.resultsPanel&&(minimumHeight=Math.max(this.resultsPanel.getContainerHeight(),minimumHeight)),null!=this.filterPanel&&(minimumHeight=Math.max(this.filterPanel.getHeight(),minimumHeight)),containerOffset=this.container.offset(),this.container.css("min-height",Math.round(minimumHeight-containerOffset.top)+"px"))},this.handleClick=function(event,url){event.ctrlKey||event.metaKey?window.open(this.searchCallback.createAnalyticsUrl(url),"_blank"):window.location.href=this.searchCallback.createAnalyticsUrl(url)},$jQ(this).on("click",$jQ.proxy(this.handleClick,this)))};